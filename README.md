# JSON-RPC Server

RPC-cервер позволяет создавать, изменять и получать пользователей из БД. В качестве БД используется SQLite.

### Параметр запуска
**-host** - адрес сервера и порт (стандартно ":8080")

## Методы
### User.Create

Создание нового пользователя. 

При создании пользователя ему автоматически выдается uuid и устанавливается дата регистрации.

### Параметры запроса
* **login** (string) - логин пользователя

Параметр login обязателен.

#### Пример запроса:
```json
{"jsonrpc":"2.0","method":"User.Create","id":1,"params":[{"login":"TestUser"}]}
```

### Параметры ответа
* **Uuid** (string) - уникальный id пользователя
* **Login** (string) - логин пользователя
* **RegDate** (string) - дата регистрации пользователя в формате (ГГГГ-ММ-ДД)

#### Пример ответа:
```json
{"result":{"Uuid":"dad5475c-ef25-4682-bf4c-40575d2a1b6a","Login":"TestUser","RegDate":"2017-12-19"},"error":null,"id":1}
```

### User.Get

Получение пользователя (или пользователей).

Если в запросе есть дата регистрации, то выводятся все пользователи с данной датой регистрации.

Если даты регистрации в запросе нет, то выводятся пользователи с соответсвующим uuid или логином.

### Параметры запроса
* **uuid** (string) - уникальный id пользователя
* **login** (string) - логин пользователя
* **regdate** (string) - дата регистрации пользователя в формате (ГГГГ-ММ-ДД)

Обязателен один из параметров.

#### Пример запроса по uuid:
```json
{"jsonrpc":"2.0","method":"User.Get","id":1,"params":[{"uuid":"dad5475c-ef25-4682-bf4c-40575d2a1b6a"}]}
```

### Параметры ответа
* **Uuid** (string) - уникальный id пользователя
* **Login** (string) - логин пользователя
* **RegDate** (string) - дата регистрации пользователя в формате (ГГГГ-ММ-ДД)

####Пример ответа:
```json
{"result":[{"Uuid":"dad5475c-ef25-4682-bf4c-40575d2a1b6a","Login":"TestUser","RegDate":"2017-12-19"}],"error":null,"id":1}
```

#### Пример запроса по дате регистрации:
```json
{"jsonrpc":"2.0","method":"User.Get","id":1,"params":[{"regdate":"2017-12-19"}]}
```
#### Пример ответа:
```json
{"result":[{"Uuid":"19a8cfe2-a934-4835-8a47-7046c2487a63","Login":"Paladinhoney","RegDate":"2017-12-19"},{"Uuid":"d69934a0-a305-4567-8b1f-bcd9129702e7","Login":"Crestspark","RegDate":"2017-12-19"}],"error":null,"id":1}
```

### User.Update

Изменение пользователя.

Для изменения пользователя необходимо в запросе указать его uuid.  Изменить можно логин и дату регистрации пользователя.

### Параметры запроса
* **uuid** (string) - уникальный id пользователя
* **login** (string) - логин пользователя
* **regdate** (string) - дата регистрации пользователя в формате (ГГГГ-ММ-ДД)

Обязателен uuid и параметры которые необходимо изменить.

#### Пользователь до изменений:
```json
{"result":[{"Uuid":"dac1dd0b-f5ca-4864-a59c-c3c5d7260aac","Login":"Hidejewel","RegDate":"2017-12-19"}],"error":null,"id":1}
```

#### Пример запроса:
```json
{"jsonrpc":"2.0","method":"User.Update","id":1,"params":[{"uuid":"dac1dd0b-f5ca-4864-a59c-c3c5d7260aac","login":"Hidejewel-new"}]}
```

### Параметры ответа
* **Uuid** (string) - уникальный id пользователя
* **Login** (string) - логин пользователя
* **RegDate** (string) - дата регистрации пользователя в формате (ГГГГ-ММ-ДД)

#### Пример ответа:
```json
{"result":{"Uuid":"dac1dd0b-f5ca-4864-a59c-c3c5d7260aac","Login":"Hidejewel-new","RegDate":"2017-12-19"},"error":null,"id":1}
```
